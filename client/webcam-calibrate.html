<html>
<head>
    <title>Webcam Calibrate</title>
    <link rel="stylesheet" href="css/index.css">
</head>

<body>
    <h1>WebCam Calibration</h1>
    <p>
        <a href="index.html">Home Page</a>
    </p>
    <video autoplay id="vid" style="display:none;" width="320" height="240"></video>
    <div>
        <canvas id="canvas" width="320" height="240"></canvas>
    </div>
    <hr>
    <div id="xyCoords"></div>
    <button onclick="setTopLeft()">Set Top Left</button>
    <button onclick="setBottomRight()">Set Bottom Right</button>
    <button onclick="reset()">Reset</button>
</body>
<script src="js/src/webcam/webcamMotion.js" type="text/javascript"></script>
<script>
    var c = document.querySelector("#canvas");
    var globalX=0, globalY=0;
    var webcamConfig = {
        video: "#vid",
        canvas1: "canvas",
        fps: 30,
        width: 320,
        height: 240,
        testing: true,
        startX: 0, 
        startY: 0,
        endX: 320,
        endY: 240
    };
    c.width = webcamConfig.width;
    c.height = webcamConfig.height;
    var ctx = canvas.getContext('2d')
    var webcamMotion = new WebCamMotion(webcamConfig, function(x, y, hits) {
        globalX = x;
        globalY = y;
        document.querySelector("#xyCoords").innerHTML = "X = " + x + ", Y = " + y + ", hits = " + hits;
    });

    function setTopLeft() {
        var configObject = {x:globalX,y:globalY};
        localStorage.setItem('topLeft',JSON.stringify(configObject));
        localStorage.setItem('canvasSize',JSON.stringify({height:c.height, width: c.width}));
        document.querySelector("#xyCoords").innerHTML = "TOP LEFT: X = " + globalX + ", Y = " + globalY;
    }

    function setBottomRight() {
        var configObject = {x:globalX,y:globalY};
        localStorage.setItem('bottomRight',JSON.stringify(configObject));
        localStorage.setItem('canvasSize',JSON.stringify({height:c.height, width: c.width}));
        document.querySelector("#xyCoords").innerHTML = "BOTTOM RIGHT: X = " + globalX + ", Y = " + globalY;
    }
    function reset() {
        localStorage.setItem('topLeft',JSON.stringify({x:0,y:0}));
        localStorage.setItem('bottomRight',JSON.stringify({x:320,y:240}));
        localStorage.setItem('canvasSize',JSON.stringify({height:c.height, width: c.width}));
    }
</script>

</html>